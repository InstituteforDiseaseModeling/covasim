{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cova_app.js","webpack:///./cova_app.css"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","use","PlotlyChart","props","h","attrs","id","this","graph","$nextTick","x","JSON","parse","json","responsive","react","purge","interventionTableConfig","social_distance","formTitle","fields","type","label","options","handleSubmit","event","start","parseInt","target","elements","end","level","school_closures","symptomatic_testing","contact_tracing","copyright_year","current_year","Date","getFullYear","range","join","onsuccess","onerror","vm","el","components","debug","app","title","version","github_url","org_url","docs_url","license","notice","panel_open","panel_width","resizing","history","historyIdx","sim_length","sim_pars","epi_pars","datafile","local_path","server_path","intervention_pars","intervention_figs","show_animation","graphs","summary","files","paramError","scenarioError","running","errs","reset_options","reset_choice","get_version","resetPars","watchSimLengthParam","get_licenses","filters","to2sf","Number","toFixed","computed","isRunDisabled","console","log","keys","is_debug","test","location","search","methods","scenarioKey","intervention","self","$set","some","best","sort","a","b","response","rpc","undefined","intervention_config","index","$delete","e","stopPropagation","preventDefault","clientX","innerWidth","$options","status","reset_datafile","kwargs","n_days","stringify","message","exception","constructor","setupFormWatcher","paramKey","params","forEach","$watch","validateParam","deep","param","max","min","fileName","getMonth","getDate","getHours","getMinutes","getSeconds","fileToSave","Blob","upload","gantt","error","fail","upload_datafile","filepath","FormData","append","fetch","then","ok","Error","text","remote_filepath","trim","replace","catch","warn","res","xlsx","content","blob","filename","locals","add","default"],"mappings":"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","file":"app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([283,\"vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import 'core-js';\nimport './cova_app.css';\nimport Vue from 'vue';\nimport { FormCheckboxPlugin, IconsPlugin, CardPlugin, FormPlugin, NavbarPlugin, ButtonPlugin, SidebarPlugin, ModalPlugin, TooltipPlugin, TabsPlugin, FormFilePlugin } from 'bootstrap-vue';\nimport sciris from 'sciris-js';\nimport { saveAs } from 'file-saver';\nimport Plotly from 'plotly.js-cartesian-dist-min';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.min.css';\n\nVue.use(IconsPlugin)\nVue.use(CardPlugin);\nVue.use(TabsPlugin);\nVue.use(NavbarPlugin);\nVue.use(ButtonPlugin);\nVue.use(SidebarPlugin);\nVue.use(ModalPlugin);\nVue.use(TooltipPlugin);\nVue.use(FormFilePlugin);\nVue.use(FormPlugin);\nVue.use(FormCheckboxPlugin);\n\nconst PlotlyChart = {\n    props: ['graph'],\n    render(h) {\n        return h('div', {\n            attrs: {\n                id: this.graph.id,\n            }\n        });\n    },\n\n    mounted() {\n        this.$nextTick(function () {\n            if (this.graph['json']) {\n                let x = JSON.parse(this.graph.json);\n                x.responsive = true;\n                Plotly.react(this.graph.id, x);\n            }\n        }\n        );\n    },\n    updated() {\n        this.$nextTick(function () {\n            if (this.graph['json']) {\n                let x = JSON.parse(this.graph.json);\n                x.responsive = true;\n                Plotly.react(this.graph.id, x);\n            } else {\n                Plotly.purge(this.graph.id)\n            }\n        });\n    }\n};\n\nconst interventionTableConfig = {\n    social_distance: {\n        formTitle: \"Social Distancing\",\n        fields: [{ key: 'start', type: 'number', label: 'Start Day' },\n        { key: 'end', type: 'number', label: 'End Day' },\n        { label: 'Effectiveness', key: 'level', type: 'select', options: [{ label: 'Aggressive Effectiveness', value: 'aggressive' }, { label: 'Moderate Effectiveness', value: 'moderate' }, { label: 'Mild Effectiveness', value: 'mild' }] }],\n        handleSubmit: function (event) {\n            const start = parseInt(event.target.elements.start.value);\n            const end = parseInt(event.target.elements.end.value);\n            const level = event.target.elements.level.value;\n            return { start, end, level };\n        }\n    },\n    school_closures: {\n        formTitle: \"School Closures\",\n        fields: [{ key: 'start', type: 'number', label: 'Start Day' }, { key: 'end', type: 'number', label: 'End Day' }],\n        handleSubmit: function (event) {\n            const start = parseInt(event.target.elements.start.value);\n            const end = parseInt(event.target.elements.end.value);\n            return { start, end };\n        }\n    },\n    symptomatic_testing: {\n        formTitle: \"Symptomatic Testing\",\n        fields: [{ key: 'start', type: 'number', label: 'Start Day' }, { key: 'end', type: 'number', label: 'End Day' }, { label: 'Accuracy', key: 'level', type: 'select', options: [{ label: '60% Accuracy', value: '60' }, { label: '90% Accuracy', value: '90' },] }],\n        handleSubmit: function (event) {\n            const start = parseInt(event.target.elements.start.value);\n            const end = parseInt(event.target.elements.end.value);\n            const level = parseInt(event.target.elements.level.value);\n            return { start, end, level };\n        }\n    },\n    contact_tracing: {\n        formTitle: \"Contact Tracing\",\n        fields: [{ key: 'start', type: 'number', label: 'Start Day' }, { key: 'end', type: 'number', label: 'End Day' }],\n        handleSubmit: function (event) {\n            const start = parseInt(event.target.elements.start.value);\n            const end = parseInt(event.target.elements.end.value);\n            return { start, end };\n        }\n    }\n\n};\n\nfunction copyright_year() {\n    const release_year = 2020\n    const current_year = new Date().getFullYear()\n    let range = [release_year]\n\n    if (current_year > release_year) {\n        range.push(current_year)\n    }\n\n    return range.join(\"-\")\n}\n\nfunction generate_upload_file_handler(onsuccess, onerror) {\n    return function (e) {\n        let files = e.target.files;\n        if (files.length > 0) {\n            const data = new FormData();\n            data.append('uploadfile', files[0])\n            data.append('funcname', 'upload_file')\n            data.append('args', undefined)\n            data.append('kwargs', undefined)\n            fetch(\"/api/rpcs\", {\n                \"body\": data,\n                \"method\": \"POST\",\n                \"mode\": \"cors\",\n                \"credentials\": \"include\"\n            }).then(response => {\n                if (!response.ok) {\n                    throw new Error(response.json())\n                }\n                return response.text()\n            }).then(data => {\n                remote_filepath = data.trim()\n                    .replace(/[\"]/g, \"\")\n                onsuccess(remote_filepath)\n            })\n                .catch(error => {\n                    if (onerror) {\n                        sciris.fail(this, \"Could not upload file.\", error)\n                    } else {\n                        onerror(error)\n                    }\n                })\n        } else {\n            console.warn(\"No input file selected.\")\n        }\n    }\n}\n\nvar vm = new Vue({\n    el: '#app',\n\n    components: {\n        'plotly-chart': PlotlyChart,\n    },\n\n    data() {\n        return {\n            debug: false,\n            app: {\n                title: \"Covasim\",\n                version: 'Unable to connect to server!', // This text will display instead of the version\n                copyright_year: copyright_year(),\n                github_url: \"https://github.com/institutefordiseasemodeling/covasim\",\n                org_url: \"https://idmod.org\",\n                docs_url: \"https://institutefordiseasemodeling.github.io/covasim-docs\",\n                license: 'Loading...',\n                notice: 'Loading...'\n            },\n            panel_open: true,\n            panel_width: null,\n            resizing: false,\n            history: [],\n            historyIdx: 0,\n            sim_length: {},\n            sim_pars: {},\n            epi_pars: {},\n            datafile: {\n                local_path: null,\n                server_path: null\n            },\n            intervention_pars: {},\n            intervention_figs: {},\n            show_animation: false,\n            result: { // Store currently displayed results\n                graphs: [],\n                summary: {},\n                files: {},\n            },\n            paramError: {},\n            scenarioError: {},\n            interventionTableConfig,\n            running: false,\n            errs: [],\n            reset_options: ['Example'],//, 'Seattle', 'Wuhan', 'Global'],\n            reset_choice: 'Example'\n        };\n    },\n\n    async created() {\n        this.get_version();\n        this.resetPars();\n        this.watchSimLengthParam();\n        this.get_licenses();\n    },\n\n    filters: {\n        to2sf(value) {\n            return Number(value).toFixed(2);\n        }\n    },\n\n    computed: {\n        isRunDisabled: function () {\n            console.log(this.paramError);\n            return this.paramError && Object.keys(this.paramError).length > 0;\n        },\n        is_debug: function () {\n            return this.debug || /debug=true/i.test(window.location.search)\n        }\n    },\n\n    methods: {\n        async addIntervention(scenarioKey, event) {\n            const intervention = this.interventionTableConfig[scenarioKey].handleSubmit(event);\n            const key = scenarioKey;\n            const self = this\n            if (!this.intervention_pars[key]) {\n                this.$set(this.intervention_pars, key, []);\n            }\n            // validate intervention\n            const notValid = !intervention.end || !intervention.start || intervention.end <= intervention.start\n            if (notValid) {\n                this.$set(this.scenarioError, scenarioKey, `Please enter a valid day range`);\n                return;\n            }\n\n            const overlaps = this.intervention_pars[key].some(({ start, end }) => {\n                return start <= intervention.start && end >= intervention.start ||\n                    start <= intervention.end && end >= intervention.end ||\n                    intervention.start <= start && intervention.end >= end;\n            })\n            if (overlaps) {\n                this.$set(this.scenarioError, scenarioKey, `Interventions of the same type cannot have overlapping day ranges.`)\n                return;\n            }\n\n            const outOfBounds = intervention.start > this.sim_length.best || intervention.end > this.sim_length.best || this.intervention_pars[key].some(({ start, end }) => {\n                return start > self.sim_length.best || end > self.sim_length.best\n            })\n            if (outOfBounds) {\n                this.$set(this.scenarioError, scenarioKey, `Intervention cannot start or end after the campaign duration.`)\n                return;\n            }\n            this.$set(this.scenarioError, scenarioKey, '');\n\n            this.intervention_pars[key].push(intervention);\n            const result = this.intervention_pars[key].sort((a, b) => a.start - b.start);\n            this.$set(this.intervention_pars, key, result);\n            const response = await sciris.rpc('get_gantt', undefined, { intervention_pars: this.intervention_pars, intervention_config: this.interventionTableConfig });\n            this.intervention_figs = response.data;\n        },\n        async deleteIntervention(scenarioKey, index) {\n            this.$delete(this.intervention_pars[scenarioKey], index);\n            const response = await sciris.rpc('get_gantt', undefined, { intervention_pars: this.intervention_pars, intervention_config: this.interventionTableConfig });\n            this.intervention_figs = response.data;\n        },\n        open_panel() {\n            this.panel_open = true;\n        },\n        close_panel() {\n            this.panel_open = false;\n        },\n        resize_start() {\n            this.resizing = true;\n        },\n        resize_end() {\n            this.resizing = false;\n        },\n        resize_apply(e) {\n            if (this.resizing) {\n                // Prevent highlighting\n                e.stopPropagation();\n                e.preventDefault();\n                this.panel_width = (e.clientX / window.innerWidth) * 100;\n            }\n        },\n\n        async get_version() {\n            const response = await sciris.rpc('get_version');\n            this.app.version = response.data;\n        },\n        async get_licenses() {\n            const response = await sciris.rpc('get_licenses');\n            this.app.license = response.data.license;\n            this.app.notice = response.data.notice;\n        },\n        async runSim() {\n            this.running = true;\n            // this.graphs = this.$options.data().graphs; // Uncomment this to clear the graphs on each run\n            this.errs = this.$options.data().errs;\n\n            console.log('status:', this.status);\n\n            // Run a a single sim\n            try {\n                if (this.datafile.local_path === null) {\n                    this.reset_datafile()\n                }\n                const kwargs = {\n                    sim_pars: this.sim_pars,\n                    epi_pars: this.epi_pars,\n                    intervention_pars: this.intervention_pars,\n                    datafile: this.datafile.server_path,\n                    show_animation: this.show_animation,\n                    n_days: this.sim_length.best\n                }\n                console.log('run_sim: ', kwargs);\n                const response = await sciris.rpc('run_sim', undefined, kwargs);\n                this.result.graphs = response.data.graphs;\n                this.result.files = response.data.files;\n                this.result.summary = response.data.summary;\n                this.errs = response.data.errs;\n                this.panel_open = this.errs.length > 0;\n                this.sim_pars = response.data.sim_pars;\n                this.epi_pars = response.data.epi_pars;\n                this.intervention_pars = response.data.intervention_pars;\n                this.history.push(JSON.parse(JSON.stringify({ sim_pars: this.sim_pars, epi_pars: this.epi_pars, intervention_pars: this.intervention_pars, result: this.result })));\n                this.historyIdx = this.history.length - 1;\n\n            } catch (e) {\n                this.errs.push({\n                    message: 'Unable to submit model.',\n                    exception: `${e.constructor.name}: ${e.message}`\n                })\n            }\n            this.running = false;\n\n        },\n\n        async resetPars() {\n            const response = await sciris.rpc('get_defaults', [this.reset_choice]);\n            this.sim_pars = response.data.sim_pars;\n            this.epi_pars = response.data.epi_pars;\n            this.sim_length = { ...this.sim_pars['n_days'] }\n            this.intervention_pars = {};\n            this.intervention_figs = {};\n            this.setupFormWatcher('sim_pars');\n            this.setupFormWatcher('epi_pars');\n            this.graphs = [];\n            this.reset_datafile()\n        },\n        setupFormWatcher(paramKey) {\n            const params = this[paramKey];\n            if (!params) {\n                return;\n            }\n            Object.keys(params).forEach(key => {\n                this.$watch(`${paramKey}.${key}`, this.validateParam(key), { deep: true });\n            });\n        },\n        watchSimLengthParam() {\n            this.$watch('sim_length', this.validateParam('sim_length'), { deep: true });\n        },\n        validateParam(key) {\n            return (param) => {\n                if (param.best <= param.max && param.best >= param.min) {\n                    this.$delete(this.paramError, key);\n                } else {\n                    this.$set(this.paramError, key, `Please enter a number between ${param.min} and ${param.max}`);\n                }\n            };\n        },\n\n        async downloadPars() {\n            const d = new Date();\n            const datestamp = `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}_${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}`;\n            const fileName = `covasim_parameters_${datestamp}.json`;\n\n            // Adapted from https://stackoverflow.com/a/45594892 by Gautham\n            const data = {\n                sim_pars: this.sim_pars,\n                epi_pars: this.epi_pars,\n                intervention_pars: this.intervention_pars\n            };\n            const fileToSave = new Blob([JSON.stringify(data, null, 4)], {\n                type: 'application/json',\n                name: fileName\n            });\n            saveAs(fileToSave, fileName);\n        },\n\n        async uploadPars() {\n            try {\n                const response = await sciris.upload('upload_pars');  //, [], {}, '');\n                this.sim_pars = response.data.sim_pars;\n                this.epi_pars = response.data.epi_pars;\n                this.intervention_pars = response.data.intervention_pars;\n                this.graphs = [];\n                this.intervention_figs = {}\n\n                if (this.intervention_pars) {\n                    const gantt = await sciris.rpc('get_gantt', undefined, { intervention_pars: this.intervention_pars, intervention_config: this.interventionTableConfig });\n                    this.intervention_figs = gantt.data;\n                }\n\n            } catch (error) {\n                sciris.fail(this, 'Could not upload parameters', error);\n            }\n        },\n        upload_datafile: generate_upload_file_handler(function (filepath) {\n            vm.datafile.server_path = filepath\n        }),\n        reset_datafile() {\n            this.datafile = {\n                local_path: null,\n                server_path: null\n            }\n        },\n        loadPars() {\n            this.sim_pars = this.history[this.historyIdx].sim_pars;\n            this.epi_pars = this.history[this.historyIdx].epi_pars;\n            this.intervention_pars = this.history[this.historyIdx].intervention_pars;\n            this.result = this.history[this.historyIdx].result;\n        },\n\n        async downloadExcel() {\n            const res = await fetch(this.result.files.xlsx.content);\n            const blob = await res.blob();\n            saveAs(blob, this.result.files.xlsx.filename);\n        },\n\n        async downloadJson() {\n            const res = await fetch(this.result.files.json.content);\n            const blob = await res.blob();\n            saveAs(blob, this.result.files.json.filename);\n        },\n\n    },\n\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./cova_app.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!./node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7ce39bb0\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./cova_app.css\", function() {\n     var newContent = require(\"!!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./cova_app.css\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}